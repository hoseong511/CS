# **C lang**
## 0. c언어와 컴퓨터
  - 컴퓨터는 일련의 연산을 수행하는 ```계산기``` 이다.
  - 알아야 할 부분들은 아래와 같다.
    ```md
    1. 누가 명령어를 읽는지?
    2. 어디서 명령어를 읽는지?
    3. 명령어는 어떻게 작성하는지?
    4. 프로그램이 무엇인지?
    ```

1. 누가 명령어를 읽는지?   
    - 컴퓨터의 모든 연산은 중앙 처리 장치, CPU(Central Processing Unit)가 읽는다.
    - 그랙픽 관련 연산들만 전문적으로 처리하는 GPU라는 장치가 따로 있다.
    - 범용적인 명령어들의 경우는 모두 CPU에서 처리한다.

2. 어디서 명령어를 읽는지?   
    - 명령어를 실행하기 위해서는 두 가지 조건이 필요하다.
    - 첫 번째로는 실행할 명령어를 읽어야 하고, 두번째로 연산된 결과를 저장할 공간이 필요하다.
    - CPU가 연산을 수행하기 위해서 데이터를 저장하는 공간을 레지스터(register)라고 부른다. (64비트 CPU의 경우 레지스터는 총 16개 -> 최대 16 * 8byte(=64bit) = 128byte)
    - 레지스터의 공간은 작다. 추가적으로 CPU의 저장 공간 역할을 하는 장치를 바로 램(RAM; Random Access Memory)이다.(시중 16GB, 휘발성 메모리)
    - 하드디스크와 SSD(비휘발성 메모리)
      ![](https://modoocode.com/img/c/cpuramhdd.png)
    - CPU가 레지스터와 램, HDD/SSD에서 데이터를 불러오는 시간이 다르다. (레지스터 >>>> 램 >>>>>>>>> SSD >>> HDD, 대략 요정도?)
      
3. 명령어는 어떻게 작성하는지? 
    - CPU가 램에서 데이터를 읽어들이기 위해서는 램의 **어느 위치**에서 데이터를 읽어들이지 알려줘야 한다.(해당위치는 고유한 **주소** 부여!)

      ![](https://modoocode.com/img/c/ram2.png)

    - 마찬가지로 **어느 위치**에 데이터를 저장할지 알려준다면 램은 해당 위치에 있는 데이터를 CPU가 전달한 데이터로 바꿉니다.
    - 중요한 점은 해당 위치(주소값)으로 부터 얼마 만큼 읽어야 할지도 알려줘야 한다.
    - CPU는 어셈블리어라는 기계어로 움직인다.(?)

4. 프로그램이 무엇인지?
    - CPU는 주소값을 통해서 램에 어디에 접근할지 명령한다.
    - CPU가 독자적으로 명령을 내릴 수 있는 것은 아니다. 그렇다면 CPU가 명령을 내리기 위해서는 해당 명령어를 가져와야 하는데 이와 같이 CPU에 실행할 명령어를 제공하는 역할을 **프로그램 실행**으로 한다.
    - 프로그램은 실행할 명령어와 데이터들의 집합니다.
    - 프로그램을 실행하면 컴퓨터의 운영체제가 CPU에게 램에 위치해 있는 프로그램의 시작점을 알려주게 되고, 이후 CPU는 해당 위치 부터 명령어를 읽어나가며 실행한다.
    - 중요한 점은 CPU가 현재 램의 어디에서 명령어를 읽어야 할지 계속 알아야 한다. 이는 CPU안에 지금 읽어들일 명령어의 위치(instruction pointer)만을 보관하는 특별한 레지스터 덕분에 가능하다.(인텔 64비트 경우, RIP)

    ![](https://modoocode.com/img/c/instruction.png)

    - CPU는 현재 내가 어떠한 프로그램을 실행하고 있는지 모르고, 그저 RIP 레지스터가 가리키는 위치에 있는 명령어를 실행할뿐이다.
    - CPU 관점에서는 메모리의 특정 주소값을 읽으라고 했을 때 뭐가 데이터이고 뭐가 프로그램 명령어 인지 알지 못한다. 그저 운영체제가 프로그램에서 처음으로 실행할 명령어의 위치를 CPU에게 알려주고 난다면, 단순히 해당 명령어 부터 읽어나갈뿐이다.
- 실제 프로그램들
  - 컴퓨터 상에서 한번에 프로그램 하나만이 돌아가지 않는다.
    ![](https://modoocode.com/img/c/ram5.png)
  - 만약 크롬이 지금 0x1234라는 위치에 공간을 사용하고 있는데, 그림판 프로그램이 0x1234 부분의 데이터를 사용하고자 한다면 크롬의 데이터를 손상시키게 된다.
  - CPU에서는 메모리를 조금 더 효율적으로 관리하기 위해서 특별한 메커니즘을 제공한다.

- 가상메모리 vs 물리 메모리
  - CPU가 참조하는 메모리 주소값을 가상 메모리(virtual memory)라고 하고, 일련의 변환 과정에 의해 참조하게될 실제 메모리의 주소값을 물리 메모리(physical memory)라고 한다.
  - 이러한 변환 방식을 페이징(paging)이라고 한다. 변환이 되는 최소의 메모리 단위를 페이지(page)라고 한다.
  - 어떻게 변환을 수행할 지 기록한 테이블을 페이지 테이블이라고하는데, 이 페이지 테이블은 각 프로그램 마다 하나씩 가지고 있다. 이 덕분에 크롬의 0x1234와 그림판의 0x1234가 실제로는 다른 물리 메모리 주소를 참조하게 된다.
  
  ![](https://modoocode.com/img/c/star3.svg)


## 1. Vscode C lang settings 
  - [link](https://justdoitproject.tistory.com/m/31)
  - 상위 디렉토리에 task.json을 설정하면 하위 디렉토리에서 동일한 환경으로 빌드할 수 있다.
  - ~~scanf 다루기가 쉽지않다. 그냥 xcode 이용하자..~~
  - 라고 생각했으나 Code Runner라는 extension을 설치하자.
  - 오른쪽 마우스 누른 후 run code를 하거나, control + option + N 을 누르면 실행된다.
  - 그리고 설정에서 ```code runner terminal``` 검색 후 ```Whether to run code in Intergrated Terminal.```을 체크해주면 scanf를 이용할 수 있다. (터미널로 결과를 출력한다.)